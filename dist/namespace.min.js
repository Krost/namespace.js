!function(t,s){"use strict";let e="1.2.1",n="DOMContentLoaded",l=!1,r=null,u={},d={},f={},p=[],c={},h={prefix:"[namespace.js]",status:!1,disable(){this.status=!1},enable(){this.status=!0},log(){this.status&&([].unshift.call(arguments,this.prefix),console.debug.apply(null,arguments))}};Object.assign=void 0!==Object.assign?Object.assign:function(){let e=arguments[0]||null;if(!e)throw"Invalid assign target";for(let t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e};const a=function(n){n=n||{};for(let e=1;e<arguments.length;e++){let t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(g._object(t[r])?n[r]=a(n[r],t[r]):n[r]=t[r])}return n};let g={_function(t){return"function"==typeof t},_async(t){return g._function(t)&&t instanceof(async()=>{}).constructor},_string(t){return"string"==typeof t||t instanceof String},_array(t){return t&&"object"==typeof t&&t.constructor===Array},_object(t){return t&&"object"==typeof t},_null(t){return null===t},_undefined(t){return void 0===t},set(t){return!g._undefined(t)&&!g._null(t)},http(){return"http"==t}};const i=()=>{g.http()&&document.removeEventListener(n,i,!1),l=!0,h.log(n),p.sort((t,e)=>t[0]===e[0]?0:t[0]>e[0]?1:-1);let t;for(;t=p.shift();)t[1].call(u)},y=function(t){let e=this,n=[t];Object.assign(e,{use(){return[].map.call(arguments,t=>{n.push("use:"+t)}),e},is(){return[].map.call(arguments,t=>{n.push("is:"+t)}),e},define(t){if(!g._object(t)&&!g._function(t))throw"Invalid factory type (function|object expected) got "+typeof t;n.push(t),o.apply(u,n)}})};let m={defined:{},ready:{},readyStack:[],define(t){m.defined[t]=!0},isdefined(t){return!0===m.defined[t]},isready(t){return!0===m.ready[t]},bindReady(t){m.readyStack.push(t),h.log("bind ready:",m.readyStack.length)},unbindReady(e){m.readyStack=m.readyStack.filter(t=>t!==e),h.log("unbind ready:",m.readyStack.length)},readyCall(e){h.log("ready call `"+e+"`"),m.readyStack.map(t=>{t(e)&&(h.log("ready `"+e+"`"),m.unbindReady(t))})},async put(t,e,n){if(!g._function(e)&&!g._object(e))throw"Invalid factory for: "+t;var r=(t=t.split(":"))[1]||null;let i=t[0].split(".");var o=i.pop();let a,l=u;for(t=t[0];a=i.shift();)g.set(l[a])||(l[a]={}),l=l[a];if(g.set(l[o]))throw"Item `"+t+"` already defined!";if(r&&g.set(s[r]))throw"Global item `"+r+"` already exists!";e=g._async(e)?await e():e,l[o]=e,r&&0!==r.length&&(s[r]=l[o]),r=t,e=l[o]=e,n=void 0===n||n,!g.http()&&n&&(c[r].exports=e),h.log("put in storage `"+t+"`"),m.ready[t]=!0,m.readyCall(t)},get(t,e){var n=(t=t.split(".")).pop();let r,i=e||u;for(;r=t.shift();){if(!g.set(i[r]))return null;i=i[r]}if(!g.set(i[n]))throw"Item `"+t+"` not found!";return i[n]},load(t){if(m.isready(t))return m.readyCall(t);m.isdefined(t)||(o=>{if(!f[o]){f[o]=!0;let t=o.split("."),e=[t.pop()+".js"],n,r,i;h.log("autoload start `"+o+"`");do{if(i=t.join("."),r&&e.unshift(r),g.set(d[i])){n=d[i]+"/"+e.join("/");break}}while(r=t.pop());if(!n&&g.http())return h.log("autoload failed `"+o+"` - empty path");if(g.http()){let t=document.createElement("script");t.type="text/javascript",t.src=n+"?"+Math.random(),t.addEventListener("load",()=>{h.log("autoload complete `"+o+"` from `"+n+"`")}),t.addEventListener("error",()=>{h.log("autoload failed `"+o+"` from `"+n+"`")}),document.getElementsByTagName("head")[0].appendChild(t)}else{var a,l;n?require(n):(a=o.split("."),l=require(a[0]),l=1<a.length?l[a[1]]:l,m.put(o,l,!1))}}})(t)}};const o=function(){if(arguments.length<1)throw"To few arguments in `namespace` method";let e=arguments[0];if(!g._string(e))throw"Invalid argument type for `name` (string expected)";var t;if(t=e.split(":")[0],i=(()=>{var e,t=Error.prepareStackTrace;let n;try{let t=new Error;for(Error.prepareStackTrace=(t,e)=>e,e=t.stack.shift().getFileName();t.stack.length&&(n=t.stack.shift().getFileName(),e===n););}catch(t){}return Error.prepareStackTrace=t,n})(),g.http()||(c[t]=require.cache[i]),1===arguments.length)return new y(e);var n,r,i=arguments[arguments.length-1];if(!g._function(i)&&!g._object(i))throw"Invalid factory type (function|object expected) got "+typeof i;let o=[];for(let t=1;t<arguments.length-1;t++)if(g._string(arguments[t])){if(arguments[t]===e)throw"Object cannot use itself";o.push(arguments[t])}else{if(!g._array(arguments[t]))throw"Invalid usage type (string or array expected)";o=o.concat(arguments[t])}m.define(e.split(":")[0]),h.log("define new item `"+e+"` with uses:",o),o.unshift(!0),o.push((n=e,r=i,function(){h.log("run factory `"+n.split(":")[0]+"`");let e={is:[],use:[]};for(let t=0;t<arguments.length;t++)e[arguments[t][0]].push(arguments[t][1]);let t=null;if(e.use.length){if(!g._function(r))throw"Invalid factory type (loaded not allowed for object factory)";t=r.apply(u,e.use)}else t=r;e.is.length&&(g._function(t)?(e.is.unshift(t.prototype),t.prototype=a.apply(u,e.is)):(e.is.unshift({}),e.is.push(t),t=a.apply(u,e.is))),m.put(n,t)})),v.apply(u,o)},v=function(t){if(arguments.length<1)throw"To few arguments in `use` method";var e,n,r=arguments[arguments.length-1];let i=[];if(!g._function(r)){for(let t=1;t<arguments.length;t++){if(!g._string(arguments[t]))throw"Invalid argument type in use method (string expected)";i.push("use:"+arguments[t])}return i}for(let t=1;t<arguments.length-1;t++){if(!g._string(arguments[t]))throw"Invalid argument type in use method (string expected)";var o=-1!==arguments[t].indexOf(":")?"":"use:";i.push(o+arguments[t])}m.bindReady(w(i,b(i,r,t)));let a=(e=i,n=r,()=>{if(0===e.length)return n.call(u);h.log("start factory for",e),e.map(t=>{t=(t=t.split(":")[1]).split("#")[0],m.load(t)})});l?a():(t=t?0+i.length:1e5+i.length,p.push([t,a]))};const w=(t,n)=>e=>0===t.length||0===(t=t.filter(t=>e!==t.split(":")[1].split("#")[0])).length&&(n.call(u),!0),b=(t,e,o)=>()=>{let i=[];t.map(t=>{var e=t.split(":")[0];let n=t.split(":")[1];t=n.split("#")[1]||null;n=n.split("#")[0];let r=m.get(n);if(!r)throw"Object `"+n+"` not found. Namespace missing or invalid?";if(t&&g._function(r))throw"Unable to use property for function factory";if(t&&(r=m.get(t,r),!r))throw"Property `"+t+"` not found in `"+n+"`";i.push(o?[e,r]:r)}),e.apply(u,i)};Object.assign(o,{version(){return console.log("namespace.js version is `1.2.1`"),e},debug(t,e=null){return t=t||!1,h.prefix=e||h.prefix,t?h.enable():h.disable(),h.log("debug:",t),o},listen(t){if(!g._string(t)||t.length<1)throw"Invalid global event name";return document.removeEventListener(n,i,!1),n=t,document.addEventListener(n,i,!1),h.log("change start event to `"+t+"`"),o},autoload(){if(arguments.length<1)return d;if(g._string(arguments[0]))return d[arguments[0]]||null;if(!g._object(arguments[0]))throw"Invalid `autoload` argument type (expected object), got "+typeof arguments[0];return Object.assign(d,arguments[0]),h.log("register new autoload:",arguments[0]),o},app(t){if(arguments.length<1)return r;if(!g._string(t))throw"Invalid `name` argument type (string expected), got "+typeof t;if(t.length<1)throw"Invalid `name` length";return r&&delete s[r],s[r=t]=u,h.log("define global application name `"+t+"`"),o}}),Object.assign(s,{namespace:o,is:function(){if(arguments.length<1)throw"To few arguments in extends method";let e=[];for(let t=0;t<arguments.length;t++){if(!g._string(arguments[t]))throw"Invalid argument type in extends method";e.push("is:"+arguments[t])}return e},use(){return[].unshift.call(arguments,!1),v.apply(u,arguments)},autoload:o.autoload,listen:o.listen}),g.http()?document.addEventListener(n,i,!1):i()}("undefined"!=typeof window?"http":"node","undefined"!=typeof window?window:global);
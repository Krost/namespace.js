!function(t,s){"use strict";let o="1.3.0",e="DOMContentLoaded",l=!1,h=0,g=1e5,n=null,u={},d={},y={},m=[],v={},f={prefix:"[namespace.js]",status:!1,disable(){this.status=!1},enable(){this.status=!0},log(){this.status&&([].unshift.call(arguments,this.prefix),console.debug.apply(null,arguments))}};Object.assign=void 0!==Object.assign?Object.assign:function(){let e=arguments[0]||null;if(!e)throw"Invalid assign target";for(let t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e};const a=function(n){n=n||{};for(let e=1;e<arguments.length;e++){let t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(p._object(t[r])?n[r]=a(n[r],t[r]):n[r]=t[r])}return n};let p={_function(t){return"function"==typeof t},_async(t){return p._function(t)&&t instanceof(async()=>{}).constructor},_string(t){return"string"==typeof t||t instanceof String},_array(t){return t&&"object"==typeof t&&t.constructor===Array},_object(t){return t&&"object"==typeof t},_null(t){return null===t},_undefined(t){return void 0===t},set(t){return!p._undefined(t)&&!p._null(t)},http(){return"http"==t}};function w(t){let e=this,n=[t];Object.assign(e,{use(){return[].map.call(arguments,t=>{n.push("use:"+t)}),e},is(){return[].map.call(arguments,t=>{n.push("is:"+t)}),e},define(t){if(!p._object(t)&&!p._function(t))throw"Invalid factory type (function|object expected) got "+typeof t;n.push(t),i.apply(u,n)}})}const r=()=>{p.http()&&document.removeEventListener(e,r,!1),l=!0,f.log(e),m.sort((t,e)=>t[0]===e[0]?0:t[0]>e[0]?1:-1);let t;for(;t=m.shift();)t[1].call(u)};let c={defined:{},ready:{},readyStack:[],define(t){c.defined[t]=!0},isdefined(t){return!0===c.defined[t]},isready(t){return!0===c.ready[t]},bindReady(t){c.readyStack.push(t),f.log("bind ready:",c.readyStack.length)},unbindReady(e){c.readyStack=c.readyStack.filter(t=>t!==e),f.log("unbind ready:",c.readyStack.length)},readyCall(e){f.log("ready call `"+e+"`"),c.readyStack.map(t=>{t(e)&&(f.log("ready `"+e+"`"),c.unbindReady(t))})},async put(t,e,n){if(!p._function(e)&&!p._object(e))throw"Invalid factory for: "+t;var r=(t=t.split(":"))[1]||null;let i=t[0].split(".");var o=i.pop();let a,l=u;for(t=t[0];a=i.shift();)p.set(l[a])||(l[a]={}),l=l[a];if(p.set(l[o]))throw"Item `"+t+"` already defined!";if(r&&p.set(s[r]))throw"Global item `"+r+"` already exists!";e=p._async(e)?await e():e,l[o]=e,r&&0!==r.length&&(s[r]=l[o]),r=t,o=l[o]=e,e=void 0===n||n,!p.http()&&e&&(v[r].exports=o),f.log("put in storage `"+t+"`"),c.ready[t]=!0,c.readyCall(t)},get(t,e){var n=(t=t.split(".")).pop();let r,i=e||u;for(;r=t.shift();){if(!p.set(i[r]))return null;i=i[r]}if(!p.set(i[n]))throw"Item `"+t+"` not found!";return i[n]},load(o){if(c.isready(o))return c.readyCall(o);if(!c.isdefined(o)){var a,l=o;if(!y[l]){y[l]=!0;let t=l.split("."),e=[t.pop()+".js"],n,r,i;f.log("autoload start `"+l+"`");do{if(i=t.join("."),r&&e.unshift(r),p.set(d[i])){n=d[i]+"/"+e.join("/");break}}while(r=t.pop());if(!n&&p.http())return void f.log("autoload failed `"+l+"` - empty path");if(p.http()){let t=document.createElement("script");t.type="text/javascript",t.src=n+"?"+Math.random(),t.addEventListener("load",()=>{f.log("autoload complete `"+l+"` from `"+n+"`")}),t.addEventListener("error",()=>{f.log("autoload failed `"+l+"` from `"+n+"`")}),document.getElementsByTagName("head")[0].appendChild(t)}else n?require(n):(o=l.split("."),a=require(o[0]),o=1<o.length?a[o[1]]:a,c.put(l,o,!1))}}}};function b(t){if(arguments.length<1)throw"To few arguments in `use` method";var e,n,r=arguments[arguments.length-1];let i=[];if(!p._function(r)){for(let t=1;t<arguments.length;t++){if(!p._string(arguments[t]))throw"Invalid argument type in use method (string expected)";i.push("use:"+arguments[t])}return i}for(let t=1;t<arguments.length-1;t++){if(!p._string(arguments[t]))throw"Invalid argument type in use method (string expected)";var o=-1!==arguments[t].indexOf(":")?"":"use:";i.push(o+arguments[t])}c.bindReady(_(i,j(i,r,t))),e=i,n=r;let a=()=>{if(0===e.length)return n.call(u);f.log("start factory for",e),e.map(t=>{t=(t=t.split(":")[1]).split("#")[0],c.load(t)})};if(!l)return r=t?h+i.length:g+i.length,void m.push([r,a]);a()}const i=function(){if(arguments.length<1)throw"To few arguments in `namespace` method";let e=arguments[0];if(!p._string(e))throw"Invalid argument type for `name` (string expected)";var t;if(i=e.split(":")[0],t=(()=>{var e,t=Error.prepareStackTrace;let n;try{let t=new Error;for(Error.prepareStackTrace=(t,e)=>e,e=t.stack.shift().getFileName();t.stack.length&&e===(n=t.stack.shift().getFileName()););}catch(t){}return Error.prepareStackTrace=t,n})(),p.http()||(v[i]=require.cache[t]),1===arguments.length)return new w(e);var n,r,i=arguments[arguments.length-1];if(!p._function(i)&&!p._object(i))throw"Invalid factory type (function|object expected) got "+typeof i;let o=[];for(let t=1;t<arguments.length-1;t++)if(p._string(arguments[t])){if(arguments[t]===e)throw"Object cannot use itself";o.push(arguments[t])}else{if(!p._array(arguments[t]))throw"Invalid usage type (string or array expected)";o=o.concat(arguments[t])}c.define(e.split(":")[0]),f.log("define new item `"+e+"` with uses:",o),o.unshift(!0),o.push((n=e,r=i,function(){f.log("run factory `"+n.split(":")[0]+"`");let e={is:[],use:[]};for(let t=0;t<arguments.length;t++)e[arguments[t][0]].push(arguments[t][1]);let t=null;if(e.use.length){if(!p._function(r))throw"Invalid factory type (loaded not allowed for object factory)";t=r.apply(u,e.use)}else t=r;e.is.length&&(p._function(t)?(e.is.unshift(t.prototype),t.prototype=a.apply(u,e.is)):(e.is.unshift({}),e.is.push(t),t=a.apply(u,e.is))),c.put(n,t)})),b.apply(u,o)};const _=(t,n)=>e=>0===t.length||0===(t=t.filter(t=>e!==t.split(":")[1].split("#")[0])).length&&(n.call(u),!0),j=(t,e,o)=>()=>{let i=[];t.map(t=>{var e=t.split(":")[0];let n=t.split(":")[1];t=n.split("#")[1]||null;n=n.split("#")[0];let r=c.get(n);if(!r)throw"Object `"+n+"` not found. Namespace missing or invalid?";if(t&&p._function(r))throw"Unable to use property for function factory";if(t&&!(r=c.get(t,r)))throw"Property `"+t+"` not found in `"+n+"`";i.push(o?[e,r]:r)}),e.apply(u,i)};Object.assign(i,{version(){return console.log("namespace.js version is `1.3.0`"),o},debug(t,e=null){return t=t||!1,f.prefix=e||f.prefix,t?f.enable():f.disable(),f.log("debug:",t),i},listen(t){if(!p._string(t)||t.length<1)throw"Invalid global event name";return document.removeEventListener(e,r,!1),e=t,document.addEventListener(e,r,!1),f.log("change start event to `"+t+"`"),i},autoload(){if(arguments.length<1)return d;if(p._string(arguments[0]))return d[arguments[0]]||null;if(!p._object(arguments[0]))throw"Invalid `autoload` argument type (expected object), got "+typeof arguments[0];return Object.assign(d,arguments[0]),f.log("register new autoload:",arguments[0]),i},app(t){if(arguments.length<1)return n;if(!p._string(t))throw"Invalid `name` argument type (string expected), got "+typeof t;if(t.length<1)throw"Invalid `name` length";return n&&delete s[n],s[n=t]=u,f.log("define global application name `"+t+"`"),i}}),Object.assign(s,{namespace:i,is:function(){if(arguments.length<1)throw"To few arguments in extends method";let e=[];for(let t=0;t<arguments.length;t++){if(!p._string(arguments[t]))throw"Invalid argument type in extends method";e.push("is:"+arguments[t])}return e},use(){return[].unshift.call(arguments,!1),b.apply(u,arguments)},autoload:i.autoload,listen:i.listen}),p.http()?document.addEventListener(e,r,!1):r()}("undefined"!=typeof window?"http":"node","undefined"!=typeof window?window:global);